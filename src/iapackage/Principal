package iapackage;

import moteurs.Action;
import moteurs.Pince;
import capteurs.ToucherCapteur;
import lejos.hardware.motor.EV3LargeRegulatedMotor;
import lejos.hardware.motor.Motor;
import lejos.robotics.RegulatedMotor;
import lejos.robotics.chassis.Chassis;
import lejos.robotics.chassis.Wheel;
import lejos.robotics.chassis.WheeledChassis;
import lejos.robotics.navigation.MovePilot;
import lejos.utility.Delay;
import lejos.hardware.port.MotorPort;
import lejos.hardware.port.Port;
import lejos.hardware.port.SensorPort;
import lejos.hardware.BrickFinder;
import lejos.hardware.lcd.GraphicsLCD;
import lejos.hardware.motor.BaseRegulatedMotor;
import lejos.hardware.motor.EV3LargeRegulatedMotor;
import lejos.hardware.motor.Motor;
import lejos.hardware.port.MotorPort;
import lejos.hardware.port.TachoMotorPort;
import lejos.robotics.Color;
import lejos.robotics.RegulatedMotor;
import lejos.robotics.chassis.Wheel;
import lejos.utility.Delay;
import lejos.robotics.navigation.MovePilot;
import lejos.robotics.navigation.MovePilot.*;

public class Principal {
	private static Action a;
	private static ToucherCapteur touch;
	private static Pince pince;
	public Principal(Action action,Pince pince, ToucherCapteur t) {
		a=action;this.pince=pince;touch=t;
	}
	public void prendrePaletTouch() {
		pince.ouvrir();
		a.setVitesse(200);
		a.avancer();
		while(!touch.estTouche()) { //s'arrête que quand le capteur touche le palet
		}
		a.stop();
		pince.fermer();
		a.tournerG(180);
		a.avancer(200);
	}

public boolean recherchePalet() {// ne marche pas totalement 
	        	// Met à jour l'échantillon actuel avec les données du capteur
	    		List<Float> values = new ArrayList<>();
	        	distance.fetchSample(sample, 0);
	        	moteur.tourne();
	        	// Boucle jusqu'à ce qu'un objet soit détecté à une distance inférieure à la portée spécifiée
	        	while (moteur.isMoving()) {
	            	distance.fetchSample(sample, 0);// Reprend une nouvelle mesure avec le capteur ultrasonique
	        	}
	      	 System.out.print(sample);
	        	// Retourne true quand un objet est détecté à moins de "range" mètres
	        	return true;

	    	}
	public void ramenerPalai() {
		a.tournerD(180);
		a.avancer (distance.fetchSample(sample,0);
		int[] t = getValeurCouleur();
		int r = t[0];
		int g = t[1];
		int b = t[2];
		while (r>25 && g>25 && b>25){

	}
	}

	public static void main(String[] args) {
		Principal p = new Principal(new Action(MotorPort.D,MotorPort.C),new Pince(MotorPort.A),new ToucherCapteur(SensorPort.S3));
		p.prendrePaletTouch();
}
